# Лабораторная работа - Реализация DHCPv4  

### Топология

![](dhcpv4.png)

### Шаг 1. Создание схемы адресации.

Разделим подсети сети 192.168.1.0/24 в соответствии со следующими требованиями:

a.	Одна подсеть «Подсеть A», поддерживающая 58 хостов (клиентская VLAN на R1).
Подсеть A - 192.168.1.0 255.255.255.192
Запишем первый IP-адрес в таблице адресации для R1 G0/0/1.100 - 192.168.1.1 . 

b.	Одна подсеть «Подсеть B», поддерживающая 28 хостов (управляющая VLAN на R1). 
Подсеть B: 192.168.1.64 255.255.255.224
Запишем первый IP-адрес в таблице адресации для R1 G0/0/1.200 - 192.168.1.65. Запишем второй IP-адрес в таблице адресов для S1 VLAN 200 - 192.168.1.66 и шлюз по умолчанию - 192.168.1.65.

c.	Одна подсеть «Подсеть C», поддерживающая 12 узлов (клиентская сеть на R2).
Подсеть C: 192.168.1.96 255.255.255.240
Запишем первый IP-адрес в таблице адресации для R2 G0/0/1 - 192.168.1.97.

Занесем все данные в талицу.


### Таблица адресации

| Устройство  | Интерфейс   | IP  -адрес          | Маска подсети  | Шлюз по умолчанию |
|-------------|-------------|---------------------|----------------|-------------------|
| R1          | G0/0/0      | 10.0.0.1            | 255.255.255.252| -                 | 
| R1          | G0/0/1.100  | 192.168.1.1         | 255.255.255.192| -                 | 
| R1          | G0/0/1.200  | 192.168.1.65        | 255.255.255.224| -                 | 
| R1          | G0/0/1.1000 | -                   | -              | -                 | 
| R2          | G0/0/0      | 10.0.0.2            | 255.255.255.252| -                 | 
| R2          | G0/0/1      | 192.168.1.97        | 255.255.255.240| -                 | 
| S1          | VLAN 200    | 192.168.1.66        | 255.255.255.224| 192.168.1.65      | 
| S2          | VLAN 1      |                     |                |                   | 
|PC-A         | NIC         | DHCP                |  DHCP          |  DHCP             |
|PC-B         | NIC         | DHCP                |  DHCP          |  DHCP             |


### Таблица VLAN

| VLAN        |    Имя       | Назначенный интерфейс         | 
|-------------|--------------|-------------------------------|
| 1           | -            | S2: F0/18                     |  
| 100         | users        | S1: F0/6                      |  
| 200         | management   | S1: VLAN 200                  |
| 999         | Parking_Lot  | S1: F0/1-4, F0/7-24, G0/1-2   |  
| 1000        | native       | -                             | 


В CPT создана лаборатория:

![](11.png)

### Шаг 1. Настройка маршрутизации между сетями VLAN на маршрутизаторе R1

Согласно схемы адресации, настроим на интрерфейсе G0/0/1 маршрутизатора R1 подинтерфейсы для каждой VLAN:

```
R1(config)#int g0/0/1.100
R1(config-subif)#description users
R1(config-subif)#encapsulation dot1Q 100
R1(config-subif)#ip address 192.168.1.1 255.255.255.192
R1(config-subif)#int g0/0/1.200
R1(config-subif)#description management
R1(config-subif)#encapsulation dot1Q 200
R1(config-subif)#ip address 192.168.1.65 255.255.255.224
R1(config-subif)#int g0/0/1.1000
R1(config-subif)#description native
R1(config-subif)#encapsulation dot1Q 1000
R1(config-subif)#int g0/0/1
R1(config-if)#no shutdown
```

### Шаг 2. Настройка интерфейса g0/0/0 маршрутизатора R1 согласно таблицы адресации и статической маршрутизации в сеть 192.168.1.96, находящуюся за R2.

```
R1(config)#int g 0/0/0
R1(config-if)#ip address 10.0.0.1 255.255.255.252
R1(config-if)#no shutdown 
R1(config)#ip route 192.168.1.96 255.255.255.240 10.0.0.2
```

### Шаг 3. Настройка адресации на интерфейсах G0/0/0 и G0/0/1 маршрутизатора R2 согласно таблицы адресации и статической маршрутизации в сети 192.168.1.0 и 192.168.1.64, находящихся за R1. 

```
R2(config)#int g 0/0/0
R2(config-if)#ip adddress 10.0.0.2 255.255.255.252
R2(config-if)#ip address 10.0.0.2 255.255.255.252
R2(config-if)#no shutdown 
R2(config-if)#int g 0/0/1
R2(config-if)#ip address 192.168.1.97 255.255.255.240
R2(config-if)#no shutdown 
R2(config)#ip route 192.168.1.0 255.255.255.192 10.0.0.1
R2(config)#ip route 192.168.1.64 255.255.255.224 10.0.0.1
```

проверим ip связанность между маршрутизаторами:

```
R1#ping 10.0.0.2

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.0.0.2, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms
```

### Шаг 4. Настройка коммутаторв S1.



d.	Назначьте все неиспользуемые порты S1 VLAN Parking_Lot, настройте их для статического режима доступа и административно деактивируйте их. На S2 административно деактивируйте все неиспользуемые порты
