
## BGP. Основы.

#### Цель:
Настроить BGP между автономными системами
Организовать доступность между офисами Москва и С.-Петербург

В этой самостоятельной работе мы ожидаем, что вы самостоятельно:

1. Настроите eBGP между офисом Москва и двумя провайдерами - Киторн и Ламас.
2. Настроите eBGP между провайдерами Киторн и Ламас.
3. Настроите eBGP между Ламас и Триада.
4. Настроите eBGP между офисом С.-Петербург и провайдером Триада.
5. Организуйте IP доступность между пограничным роутерами офисами Москва и С.-Петербург.

##  Схема стенда 

![](eigrp.png)

#### Выполнение.

* Нам важна следующая информация:
1. Номер AS Москва и блок IP-адресов. Их мы уже получили: AS1001 и блок: 140.100.100.0/24.
2. Номер AS С.-Петербург и блок IP-адресов. Их мы уже получили: AS2042 и блок: 20.0.0.0/24.
3. Номер AS провайдера «Киторн» и линковая подсеть с ним. AS101 и линковая сеть: 101.0.0.0/30.
4. Номер AS провайдера «Ламас» и линковая подсеть с ним. AS301 и линковая сеть: 30.1.0.0/30.
5. Номер AS провайдера «Триада» и линковая подсеть с ним. AS520 и линковая сеть: 52.1.0.0/30, 52.1.0.4/30.
Рассмотрим базовую настройку на примере R16:

* R16:

```
R16#sh run | s r e
router eigrp Piter
 !
 address-family ipv4 unicast autonomous-system 100
  !
  af-interface Ethernet0/1
   summary-address 10.1.0.0 255.255.255.224
  exit-af-interface
  !
  topology base
  exit-af-topology
  network 10.1.0.0 0.0.0.255
  network 10.1.1.4 0.0.0.3
  network 10.1.2.0 0.0.0.3
  network 10.2.1.4 0.0.0.0
 exit-address-family
R16#

Соседи :

R16#sh ip eigrp neighbors 
EIGRP-IPv4 VR(Piter) Address-Family Neighbors for AS(100)
H   Address                 Interface              Hold Uptime   SRTT   RTO  Q  Seq
                                                   (sec)         (ms)       Cnt Num
3   10.1.2.1                Et0/3                    13 00:01:59    8   100  0  4
2   10.1.0.13               Et0/0                    10 00:02:01    1   100  0  24
1   10.1.0.1                Et0/2                    11 00:02:01    2   100  0  19
0   10.1.1.6                Et0/1                    10 00:02:02    3   100  0  16
R16#

И таблица маршрутизации:

R16#sh ip route eigrp 

Gateway of last resort is 10.1.1.6 to network 0.0.0.0

D*EX  0.0.0.0/0 [170/1536000] via 10.1.1.6, 00:03:13, Ethernet0/1
      10.0.0.0/8 is variably subnetted, 19 subnets, 3 masks
D        10.1.0.4/30 [90/1536000] via 10.1.0.13, 00:03:15, Ethernet0/0
D        10.1.0.8/30 [90/1536000] via 10.1.0.1, 00:03:15, Ethernet0/2
D        10.1.0.16/30 [90/1536000] via 10.1.0.13, 00:03:15, Ethernet0/0
                      [90/1536000] via 10.1.0.1, 00:03:15, Ethernet0/2
D        10.1.1.0/30 [90/1536000] via 10.1.1.6, 00:03:13, Ethernet0/1
D        10.2.1.1/32 [90/1024640] via 10.1.0.1, 00:03:15, Ethernet0/2
D        10.2.1.2/32 [90/1024640] via 10.1.0.13, 00:03:15, Ethernet0/0
D        10.2.1.3/32 [90/1536640] via 10.1.1.6, 00:03:08, Ethernet0/1
                     [90/1536640] via 10.1.0.13, 00:03:08, Ethernet0/0
                     [90/1536640] via 10.1.0.1, 00:03:08, Ethernet0/2
D        10.2.1.18/32 [90/1024640] via 10.1.1.6, 00:03:13, Ethernet0/1
D        10.3.1.1/32 [90/1024640] via 10.1.2.1, 00:03:14, Ethernet0/3
      172.16.0.0/24 is subnetted, 2 subnets
D        172.16.1.0 [90/1029120] via 10.1.0.1, 00:02:59, Ethernet0/2
D        172.16.2.0 [90/1029120] via 10.1.0.13, 00:02:58, Ethernet0/0
R16# 
```

#### R32 получает только маршрут по умолчанию:
